webpackJsonp([12],{jvVH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r,n=a("m1qg"),i=a.n(n),u=a("YbOa"),l=a.n(u),c=a("U5hO"),o=a.n(c),h=a("EE81"),m=a.n(h),d=a("Jmyu"),p=a.n(d),f=a("/00i"),g=a.n(f),y=a("9wvh"),v=a.n(y),E=a("NmwX"),w=(a.n(E),a("keDy")),_=a.n(w),k=(s=Object(E.connect)(function(e){var t=e.play;return console.log("play..",t),t},function(e){return{}}))(r=function(e){function t(){var e;return l()(this,t),e=p()(this,g()(t).call(this)),e.state={rightAnser:[],distiguishList:[],answers:new Array(10),answerList:[],current:0,isPlay:!1,progress:0,tempTime:{start:0,end:0}},e}return m()(t,[{key:"randomAnswer",value:function(){this.setState({answerList:this.state.rightAnser})}},{key:"componentDidMount",value:function(){this.randomAnswer()}},{key:"startPlay",value:function(){var e=this;console.log("e...\u5f00\u59cb\u64ad\u653e",this.refs.audio.duration);var t=Math.floor(Math.random()*(this.refs.audio.duration-10));this.setState({tempTime:{start:t,end:t+10}},function(){i()(document.querySelectorAll("ul button")).forEach(function(e){e.className=e.className.replace(" error","").replace(" success","")}),e.refs.audio.pause(),e.refs.audio.currentTime=t,e.refs.audio.play()})}},{key:"timeUpdate",value:function(){var e=this;this.refs.audio.currentTime>this.state.tempTime.end&&(this.refs.audio.pause(),9==this.state.current?console.log("this.answers...",this.state.answers):this.setState({current:(this.state.current+1)%10},function(){e.refs.audio.play()})),this.setState({progress:Math.floor((this.refs.audio.currentTime-this.state.tempTime.start)/10*100)})}},{key:"play",value:function(){var e=this;this.setState({isPlay:!this.state.isPlay},function(){e.state.isPlay?e.refs.audio.play():e.refs.audio.pause()})}},{key:"answer",value:function(e){if(!this.state.answers[this.state.current]&&e.target!=e.currentTarget){var t=e.target.innerText,a=i()(this.state.answers);a[this.state.current]=t,this.setState({answers:a}),this.state.rightAnser[this.state.current]==t?e.target.className+=" success":e.target.className+=" error"}}},{key:"render",value:function(){var e=this;return v.a.createElement(v.a.Fragment,null,this.state.distiguishList&&v.a.createElement("div",{className:_.a.distinguish},v.a.createElement("div",{className:_.a.header},v.a.createElement("a",{href:"javascript:history.back();"},v.a.createElement("img",{src:"./icon/back.png",alt:""})),v.a.createElement("h1",null,"\u542c\u6b4c\u8bc6\u66f2\u6e38\u620f"),v.a.createElement("div",{className:_.a.basis})),v.a.createElement("div",{className:_.a.main},v.a.createElement("ul",{onClick:this.answer.bind(this)},this.state.answerList.map(function(e){return v.a.createElement("button",{className:_.a.answer,key:e},e)})),v.a.createElement("div",null,v.a.createElement("span",null,"00."+this.currentTime),v.a.createElement("div",{className:_.a.progress},v.a.createElement("p",{ref:"progress"},v.a.createElement("span",{style:{width:this.state.progress+"%"}}))),v.a.createElement("span",null,"00.10")),v.a.createElement("button",{onClick:this.play.bind(this)},this.state.isPlay?"\u6682\u505c":"\u64ad\u653e"),v.a.createElement("span",null,"".concat(this.state.current+1,"/10")),v.a.createElement("audio",{crossOrigin:"anonymous",src:this.state.distiguishList[this.state.current].url,ref:"audio",onTimeUpdate:function(){return e.timeUpdate()},onLoadedMetadata:function(){return e.startPlay()}}),v.a.createElement("ul",{className:_.a.list},v.a.createElement("h2",null,"\u731c\u6b4c\u7ed3\u679c"),this.state.answers.map(function(t,a){return v.a.createElement("li",{key:a},v.a.createElement("span",null,a+1),v.a.createElement("span",null,"\u7b54\u6848\uff1a",t),v.a.createElement("span",null,t==e.state.rightAnser[a]?"\u731c\u5bf9":"\u731c\u9519"))})))))}},{key:"currentTime",get:function(){return this.refs.audio&&this.refs.audio.currentTime?(Math.floor(this.refs.audio.currentTime-this.state.tempTime.start)+"").padStart(2,"0"):"00"}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.distiguishList||JSON.parse(window.localStorage.getItem("distiguishList"));return{rightAnser:a.map(function(e){return e.name.name}),distiguishList:a}}}]),o()(t,e),t}(y.Component))||r;t.default=k},keDy:function(e,t){e.exports={distinguish:"distinguish___3rkzM",header:"header___38JsE",basis:"basis___Qs9Xd",main:"main___26ive",answer:"answer___2Q_Cp",list:"list___19wzK",progress:"progress___3WuUu"}}});